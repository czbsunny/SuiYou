<template>
  <uni-popup ref="popup" type="bottom" border-radius="20px 20px 0 0">
    <view class="template-picker">
      <view class="picker-header">
        <text class="title">é€‰æ‹©ç›®æ ‡ç±»å‹</text>
        <text class="subtitle">é€šè¿‡æ¨¡æ¿å¿«é€Ÿè§„åˆ’è´¢åŠ¡æ–¹æ¡ˆ</text>
      </view>
      
      <view class="template-list">
        <view class="t-item" v-for="t in templates" :key="t.id" @click="select(t)">
          <view class="t-icon" :style="{ background: t.bg }">{{ t.icon }}</view>
          <view class="t-info">
            <text class="t-name">{{ t.name }}</text>
            <text class="t-desc">{{ t.desc }}</text>
          </view>
          <uni-icons type="chevron-right" size="16" color="#ccc"></uni-icons>
        </view>
      </view>
      
      <view class="custom-entry" @click="select(null)">
        <text>ç›´æ¥åˆ›å»ºè‡ªå®šä¹‰ç›®æ ‡</text>
      </view>
    </view>
  </uni-popup>
</template>

<script setup>
import { ref } from 'vue';
const popup = ref(null);
const templates = [
  { id: 1, name: 'çŸ­æœŸÂ·åº”æ€¥é‡‘', desc: 'é¢„ç•™6ä¸ªæœˆç”Ÿæ´»è´¹ï¼Œé˜²èŒƒæ„å¤–é£é™©', icon: 'ğŸ›¡ï¸', bg: '#e3f2fd', target: 20000 },
  { id: 2, name: 'ä¸­æœŸÂ·å¿ƒæ„¿å•', desc: 'æ—…è¡Œã€æ•°ç äº§å“æˆ–å¤§ä»¶è´­ç½®è®¡åˆ’', icon: 'ğŸ’', bg: '#e8f5e9', target: 15000 },
  { id: 3, name: 'é•¿æœŸÂ·è´¢å¯Œæ± ', desc: 'æ•™è‚²ã€å…»è€æˆ–æ ¸å¿ƒèµ„äº§ç§¯ç´¯', icon: 'ğŸ“ˆ', bg: '#fff8e1', target: 100000 }
];

const open = () => popup.value.open();
const select = (t) => {
  popup.value.close();
  emit('confirm', t);
};
const emit = defineEmits(['confirm']);
defineExpose({ open });
</script>

<style lang="scss" scoped>
.template-picker {
  background: #fff; padding: 40rpx; padding-bottom: calc(40rpx + env(safe-area-inset-bottom));
  .picker-header { margin-bottom: 40rpx;
    .title { font-size: 32rpx; font-weight: bold; color: #2c3e50; display: block; }
    .subtitle { font-size: 22rpx; color: #95a5a6; margin-top: 4rpx; }
  }
}
.t-item {
  display: flex; align-items: center; padding: 30rpx; background: #f8fafc;
  border-radius: 24rpx; margin-bottom: 20rpx;
  .t-icon { width: 80rpx; height: 80rpx; border-radius: 20rpx; display: flex; align-items: center; justify-content: center; font-size: 40rpx; margin-right: 24rpx; }
  .t-info { flex: 1;
    .t-name { font-size: 28rpx; font-weight: bold; color: #2c3e50; display: block; }
    .t-desc { font-size: 22rpx; color: #7f8c8d; }
  }
}
.custom-entry { text-align: center; padding: 20rpx; font-size: 26rpx; color: #2a806c; margin-top: 10rpx; }
</style>